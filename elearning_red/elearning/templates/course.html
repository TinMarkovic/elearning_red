{% extends "base.html" %}
{% block title %} Course {% endblock title %}
{% block content %}
{% load bootstrap3 %}
<form method="post" action="" >
    {% csrf_token %}
   {% bootstrap_form form layout='horizontal' %}
    <input type="submit" value="Submit a course" />
</form>
<table class="table table-striped table-hover ", id="table_1">
    <thead>
    <tr class="info">
        <th>Name:</th>
        <th>Begins:</th>
        <th>Duration(days):</th>
        <th>Description:</th>
        <th>Author:</th>
        <th>Tags:</th>
    <th>Average rating:</th>
    <th></th>
    <th></th>
    <th></th>
    <th></th>

    </tr>
    </thead>
    {% for item in courses %}
    <tr  class="success" id={{item.id}}>
        <td>{{ item.name }}</td>
        <td>{{ item.beginDate }}</td>
        <td>{{ item.duration }}</td>        
        <td>{{ item.desc }} </td>
        <td>{{ item.author }}</td>
        <td>{{ item.tagList }}</td>
        <td>{{ item.avgRating }}</td>
        <td><a href="{% url "elearning:editCourse" course_id=item.id %}" class="btn btn-raised btn-success">Edit</a> </td>
        <td><a href="{% url "elearning:detailsCourse" course_id=item.id %}" class="btn btn-raised btn-info">Details</a> </td>
        <td> <a href="{% url "elearning:manageCourse" course_id=item.id %}" class="btn btn-raised btn-danger">Manage</a> </td>
        <td> <a href="" class="btn btn-raised btn-warning deleteBlock">Delete</a> </td>
    </tr>
    {% endfor %}
</table>
{% endblock content %}

{% block navigation %}
<div class="navbar navbar-danger">


  <div class="container-fluid">
 
    


    <div class="navbar-collapse collapse navbar-danger-collapse">
      <ul class="nav navbar-nav" id="menu">
       
             <li><ul class="breadcrumb">
            <li><a href={% url "elearning:homepage" %} class="btn btn-default"><b>Home</b></a></li>
            <li><a href={% url "elearning:listCourses" %} class="btn btn-default"><b>List of courses</b></a></li>
            <li class="active"><b>Edit</b></a></li>
           
            </ul></li>
            

          
        
      </ul>
      
          
        </li>
      </ul>
    </div>
  </div>
</div>


<div class="container-fluid">

          <button type="button" class="hamburger is-closed" data-toggle="offcanvas">
          <span class="hamb-top"></span>
          <span class="hamb-middle"></span>
          <span class="hamb-bottom"></span>
          </button>
         
          </div>
{% endblock navigation %}



{% block script %}
<script>
$(document).ready( function () {
    $('#table_1').DataTable({"aoColumnDefs": [ { "bSortable": false, "aTargets": [ -1, -2, -3, -4 ] } ]})  
    
      $( ".deleteBlock" ).on( "click", function( event, ui ) {
        $element = $(this).parents("tr");
        var course_id = $element.attr("id");
        
        if(confirm("Are you certain you want to delete this course?")){
            $.ajax({
                 type:"DELETE",
                 url:"/courses/edit/" + course_id,
                 data: {},
                 success: function(){
                        $element.remove();

                }
            });
        }
    });
});
</script>
{% endblock script %}


